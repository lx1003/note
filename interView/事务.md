事务是逻辑上的一组操作，要么都执行，要么都不执行

- 原子性

  事务是最小的执行单位，不允许分割。事务的原子性确保动作要么全部完成，要么完全不起作用

- 一致性

  执行事务前后，数据保持一致

- 隔离性

  并发访问数据时，一个用户的事务不被其他事务所干扰，各并发事务之间数据库是独立的

- 持久性

  一个事务被提交后。它对数据库中数据的改变是持久的，即使数据库发生故障也不应该对其有影响

#### 并发事务带来的问题

- 脏读：当一个事务正在访问数据并且对数据进行了修改，而这种修改还没有提交到数据库，这时另外一个事务也访问了这个数据，然后使用了这个数据。因为这个数据还没有提交数据，那么另外一个事务读到的这个数据是“脏数据”，
- 丢失修改：指在一个事务读取一个数据时，另外一个事务也访问了该数据，那么在第一个事务中修改了这个数据后，第二个事务也修改了这个数据。这样第一个事务内的修改结果就被丢失，因此称为丢失修改
- 不可重复读：指在一个事务内多次读同一数据。这个事务还没有结束时，另一个事务也访问了该数据。那么，第一个事务中的两次读数据之间，由于第二个事务的修改导致第一个事务两次读取的数据可能不太一样。两次读取到的数据不一样的情况，称为不可重复读
- 幻读：幻读和不可重复读类似。发生在一个事务读取了几行数据，接着另一个并发事务插入了一些时间时，在随后的查询中，第一个事务就会发现多了一个原本不存在的记录，就好像发上了幻觉，称为幻读



#### 不可重复读和幻读区别

不可重复读和幻读的区别

不可重复读的重点是修改，幻读的重点在于新增或删除



#### 事务隔离级别

|           隔离级别            | 脏读 | 不可重复读 | 幻读 |
| :---------------------------: | :--: | :--------: | :--: |
| 读取未提交（READ-UNCOMMITTED) |  √   |     √      |  √   |
| 读取已提交（READ-COMMITTED）  |  ×   |     √      |  √   |
|  可重复读（REPEATABLE-READ）  |  ×   |     ×      |  √   |
|   可串行化（SERIALIZABLE）    |  ×   |     ×      |  ×   |

MySQL InnoDB存储引擎的默认支持的隔离级别是REPEATABLE-READ（可重读）

